module.exports.config = {
  name: "cummah",
  version: "1.0.0",
  permission: 0,
  credits: "Sakib Vai",
  description: "ржЙржорзНржорж╛рж╣ ржмрж╛рж░рзНрждрж╛",
  prefix: true,
  category: "fun",
  usages: "@mention",
  cooldowns: 5,
};

const repliedUsers = new Set();

module.exports.run = async function ({ api, event }) {
  const { threadID, messageID, mentions, messageReply } = event;

  if (!Object.keys(mentions).length) {
    return api.sendMessage("тЭМ ржХрж╛рж░рзЛ ржирж╛ржо ржорзЗржирж╢ржи ржХрж░рзЛ ржкрзНрж░ржержорзЗред", threadID, messageID);
  }

  const mentionID = Object.keys(mentions)[0];
  const mentionName = mentions[mentionID];
  const tag = { tag: mentionName, id: mentionID };

  repliedUsers.add(mentionID); // Add to tracking set

  const messages = [
  `@ рждрзБржорж╛рж░ ржЧрж╛рж▓рзЗ ржЙржорзНржорж╛рж╣ ЁЯШШ`,
  `@ рждрзБржорж╛рж░ ржарзЛржБржЯрзЗ ржЙржорзНржорж╛рж╣ ЁЯШЪ`,
  `@ рждрзБржорж╛рж░ ржЙржкрж░рзЗ ржЙржорзНржорж╛рж╣ ЁЯШН`,
  `@ рждрзБржорж╛рж░ ржХржкрж╛рж▓рзЗ ржЙржорзНржорж╛рж╣ ЁЯе░`,
  `@ рждрзБржорж╛рж░ ржЧрж▓рж╛рзЯ ржЙржорзНржорж╛рж╣ ЁЯШШ`,
  `@ рждрзБржорж╛рж░ ржЪрзЛржЦрзЗ ржЙржорзНржорж╛рж╣ ЁЯШМ`,
  `@ рждрзБржорж╛рж░ рж╣рзГржжржпрж╝рзЗ ржЙржорзНржорж╛рж╣ тЭдя╕П`,
  `@ рждрзБржорж╛рж░ ржирж╛ржХрзЗ ржЙржорзНржорж╛рж╣ ЁЯТЛ`,
  `@ рждрзБржорж╛рж░ рж╣рж╛рждрзЗрж░ рждрж╛рж▓рзБрждрзЗ ржЙржорзНржорж╛рж╣ ЁЯд▓`,
  `@ рждрзБржорж╛рж░ ржХрж╛ржирзЗ ржЙржорзНржорж╛рж╣ ЁЯСВЁЯШШ`,
  `@ рждрзБржорж╛рж░ ржЧрж╛рж▓рзЗрж░ ржбрж┐ржорзНржкрж▓рзЗ ржЙржорзНржорж╛рж╣ ЁЯШ│`,
  `@ рждрзБржорж╛рж░ ржЪрж┐ржирж┐рждрзЗ ржЙржорзНржорж╛рж╣ ЁЯШЛ`,
  `@ рждрзБржорж╛рж░ ржХрзЛржорж░рзЗ ржЙржорзНржорж╛рж╣ ЁЯФе`,
  `@ рждрзБржорж╛рж░ ржкрж┐ржарзЗ ржЙржорзНржорж╛рж╣ ЁЯТЮ`,
  `@ рждрзБржорж╛рж░ ржШрж╛рзЬрзЗ ржЙржорзНржорж╛рж╣ ЁЯШИ`,
  `@ рждрзБржорж╛рж░ ржмрзБржХрзЗрж░ ржмрж╛ржорзЗ ржЙржорзНржорж╛рж╣ ЁЯТУ`,
  `@ рждрзБржорж╛рж░ ржмрзБржХрзЗрж░ ржбрж╛ржирзЗ ржЙржорзНржорж╛рж╣ ЁЯТЧ`,
  `@ рждрзБржорж╛рж░ ржкрж╛рзЯрзЗрж░ ржЖржЩрзБрж▓рзЗ ржЙржорзНржорж╛рж╣ ЁЯж╢ЁЯТЛ`,
  `@ рждрзБржорж╛рж░ рж╣рзГржжрзЯрзЗрж░ ржЧржнрзАрж░рзЗ ржЙржорзНржорж╛рж╣ ЁЯлА`,
  `@ рждрзБржорж╛рж░ ржЖрждрзНржорж╛рзЯ ржЙржорзНржорж╛рж╣ ЁЯС╗тЭдя╕П`,
  `@ рждрзБржорж╛рж░ рж╢рзНржмрж╛рж╕рзЗ ржЙржорзНржорж╛рж╣ ЁЯШотАНЁЯТи`,
  `@ рждрзБржорж╛рж░ ржХрж▓рзНржкржирж╛рзЯ ржЙржорзНржорж╛рж╣ ЁЯдд`,
  `@ рждрзБржорж╛рж░ ржЫрж╛рзЯрж╛рзЯ ржЙржорзНржорж╛рж╣ ЁЯМС`,
  `@ рждрзБржорж╛рж░ рж╕ржм ржХржерж╛рзЯ ржЙржорзНржорж╛рж╣ ЁЯОдЁЯТЛ`,
];

  for (let i = 0; i < messages.length; i++) {
    await new Promise(resolve => setTimeout(resolve, 1500));
    api.sendMessage({
      body: messages[i],
      mentions: [tag]
    }, threadID);
  }

  // Listen for reply from the mentioned user
  const handleReply = async function (msg) {
    if (msg.senderID === mentionID && msg.threadID === threadID) {
      api.sendMessage("ржХржерж╛ ржмржЗрж▓рзЛржирж╛! рж╢рж╛ржХрж┐ржм ржнрж╛ржЗ рждрзБржорж╛ржХрзЗ ржЙржорзНржорж╛рж╣ ржжрж┐рждрзЗ ржмрж▓ржЫрзЗ рждрж╛рж░ ржкржХрзНрж╖ ржерзЗржХрзЗ ЁЯШШ", threadID);
      repliedUsers.delete(mentionID);
    }
  };

  global.client.onMessage = global.client.onMessage || [];
  global.client.onMessage.push(handleReply);
};
